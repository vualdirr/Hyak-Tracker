<!-- E:\Hyak-Tracker\popup.html -->
<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="popup.css" />
  </head>

  <body>
    <!-- Banner (commune) -->
    <div class="banner" id="banner">
      <div class="bannerBg" id="bannerBg"></div>
      <div class="bannerShade"></div>

      <div class="bannerMetaRow">
        <span class="bannerApp">Hyak Tracker</span>
        <span class="pill" id="pageDomain">—</span>
        <span id="animeStatusPill" class="pill pill--muted hidden">—</span>
      </div>

      <div class="bannerRow">
        <img class="poster" id="poster" alt="" />
        <div class="bannerText">
          <div class="animeTitle" id="bannerTitle">—</div>
          <div class="subtitle" id="bannerSub">—</div>
        </div>
      </div>
    </div>

    <!-- ROOT VIEW (racine site streaming) -->
    <div id="viewRoot" class="hidden">
      <button id="btnSettingsRoot" title="Ouvrir les paramètres">
        ⚙️ Paramètres
      </button>
      <pre id="logRoot" class="hidden"></pre>
    </div>

    <!-- UNSUPPORTED VIEW -->
    <div id="viewUnsupported" class="hidden">
      <button id="btnSettingsUnsupported" title="Ouvrir les paramètres">
        ⚙️ Paramètres
      </button>

      <div id="unsupportedMessage" class="unsupportedMessage"></div>

      <pre id="logUnsupported" class="hidden"></pre>
    </div>

    <!-- EPISODE VIEW -->
    <div id="viewMain">
      <label>Titre</label>
      <div class="fieldRow">
        <input id="title" placeholder="Saisis…" />
      </div>

      <label>Épisode</label>
      <div class="fieldRow">
        <input id="episode" placeholder="Épisode" />
      </div>

      <button id="btnSearch" class="hidden">Trouver sur Hyakanime</button>

      <button id="btnSettings" title="Ouvrir les paramètres">
        ⚙️ Paramètres
      </button>

      <button id="btnWrite" disabled>Marquer “vu”</button>

      <div id="choices"></div>
      <pre id="log" class="hidden"></pre>
    </div>

    <!-- SETTINGS VIEW -->
    <div id="viewSettings" class="hidden">
      <div class="settingsHeader">
        <button id="btnBack" class="iconBtn" title="Retour">←</button>
        <div class="settingsTitle">Paramètres</div>
      </div>

      <div class="settingsCard">
        <div class="settingsRow">
          <div>
            <div class="settingsLabel">Marquage automatique</div>
            <div class="settingsHint">
              Marque automatiquement l’épisode quand les conditions sont
              remplies.
            </div>
          </div>
          <button id="toggleAutoMark" class="toggleBtn">—</button>
        </div>

        <div class="settingsRow">
          <div>
            <div class="settingsLabel">Mode debug</div>
            <div class="settingsHint">
              Affiche plus d’infos et de logs (pour support/dev).
            </div>
          </div>
          <button id="toggleDebug" class="toggleBtn">—</button>
        </div>

        <div class="settingsRow">
          <div>
            <div class="settingsLabel">Logs support</div>
            <div class="settingsHint">
              Copie les logs de l’onglet actuel (utile pour support/dev).
            </div>
          </div>
          <button id="btnCopyLogs" class="toggleBtn">Copier</button>
        </div>
      </div>

      <pre id="logSettings" class="hidden"></pre>
    </div>

    <script type="module" src="src/popup/index.js"></script>
  </body>
</html>
