<!-- E:\Hyak-Tracker\popup.html -->
<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="popup.css" />
  </head>

  <body>
    <!-- Banner (commune) -->
    <div class="banner" id="banner">
      <div class="bannerBg" id="bannerBg"></div>
      <div class="bannerShade"></div>

      <div class="bannerMetaRow">
        <span class="bannerApp">Hyak Tracker</span>
        <span class="pill" id="pageDomain">â€”</span>
        <span id="animeStatusPill" class="pill pill--muted hidden">â€”</span>
      </div>

      <div class="bannerRow">
        <img class="poster" id="poster" alt="" />
        <div class="bannerText">
          <div class="animeTitle" id="bannerTitle">â€”</div>
          <div class="subtitle" id="bannerSub">â€”</div>
        </div>
      </div>
    </div>

    <!-- ROOT VIEW (racine site streaming) -->
    <div id="viewRoot" class="hidden">
      <div id="calendarList" class="calendar-list"></div>
      <div class="dualButtons">
        <button id="btnHistoryRoot">ğŸ•˜ Historique</button>
        <button id="btnSettingsRoot" title="Ouvrir les paramÃ¨tres">
          âš™ï¸ ParamÃ¨tres
        </button>
      </div>
      <pre id="logRoot" class="hidden"></pre>
    </div>

    <!-- UNSUPPORTED VIEW -->
    <div id="viewUnsupported" class="hidden">
      <div class="dualButtons">
        <button id="btnHistoryRoot">ğŸ•˜ Historique</button>
        <button id="btnSettingsRoot" title="Ouvrir les paramÃ¨tres">
          âš™ï¸ ParamÃ¨tres
        </button>
      </div>

      <div id="unsupportedMessage" class="unsupportedMessage"></div>

      <pre id="logUnsupported" class="hidden"></pre>
    </div>

    <!-- EPISODE VIEW -->
    <div id="viewMain">
      <label>Titre</label>
      <div class="fieldRow">
        <input id="title" placeholder="Saisisâ€¦" />
      </div>

      <label>Ã‰pisode</label>
      <div class="fieldRow">
        <input id="episode" placeholder="Ã‰pisode" />
      </div>

      <button id="btnSearch" class="hidden">Trouver sur Hyakanime</button>

      <div class="dualButtons">
        <button id="btnHistory">ğŸ•˜ Historique</button>
        <button id="btnSettings" title="Ouvrir les paramÃ¨tres">
          âš™ï¸ ParamÃ¨tres
        </button>
      </div>

      <button id="btnWrite" disabled>Marquer â€œvuâ€</button>

      <div id="choices"></div>
      <pre id="log" class="hidden"></pre>
    </div>

    <!-- HISTORY VIEW -->
    <div id="viewHistory" class="hidden">
      <div class="settingsHeader">
        <button id="btnBackHistory" class="iconBtn" title="Retour">â†</button>
        <div class="settingsTitle">Historique</div>
      </div>

      <div id="historyList" class="historyList"></div>

      <pre id="logHistory" class="hidden"></pre>
    </div>

    <!-- SETTINGS VIEW -->
    <div id="viewSettings" class="hidden">
      <div class="settingsHeader">
        <button id="btnBack" class="iconBtn" title="Retour">â†</button>
        <div class="settingsTitle">ParamÃ¨tres</div>
      </div>

      <div class="settingsCard">
        <div class="settingsRow">
          <div>
            <div class="settingsLabel">Marquage automatique</div>
            <div class="settingsHint">
              Marque automatiquement lâ€™Ã©pisode quand les conditions sont
              remplies.
            </div>
          </div>
          <button id="toggleAutoMark" class="toggleBtn">â€”</button>
        </div>

        <div class="settingsRow">
          <div>
            <div class="settingsLabel">Mode debug</div>
            <div class="settingsHint">
              Affiche plus dâ€™infos et de logs (pour support/dev).
            </div>
          </div>
          <button id="toggleDebug" class="toggleBtn">â€”</button>
        </div>

        <div class="settingsRow">
          <div>
            <div class="settingsLabel">Logs support</div>
            <div class="settingsHint">
              Copie les logs de lâ€™onglet actuel (utile pour support/dev).
            </div>
          </div>
          <button id="btnCopyLogs" class="toggleBtn">Copier</button>
        </div>
      </div>

      <pre id="logSettings" class="hidden"></pre>
    </div>

    <script type="module" src="src/popup/index.js"></script>
  </body>
</html>
